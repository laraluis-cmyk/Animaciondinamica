<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mini Paint Deluxe Mexa v2</title>
<style>
  body {
    background: #a7c7a2; /* Fondo verde chillón pero bonito */
    margin: 0;
    font-family: "Poppins", sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }

  .paint-container {
    display: flex;
    background: #f4f4f4;
    border-radius: 20px;
    box-shadow: 0 5px 20px rgba(0,0,0,0.2);
    padding: 20px;
    gap: 25px;
  }

  /* Canvas al centro */
  canvas {
    background: white;
    border: 4px solid #666;
    border-radius: 10px;
    cursor: none;
  }

  /* Panel derecho con herramientas */
  .tools {
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    align-items: center;
    gap: 20px;
  }

  /* Botones */
  button {
    border: none;
    padding: 10px 15px;
    border-radius: 10px;
    cursor: pointer;
    font-weight: bold;
    transition: all 0.2s ease;
    color: white;
  }

  button:hover {
    transform: scale(1.05);
  }

  #mode { background: #3c7c4d; }
  #eraser { background: #888; }
  #clearAll { background: #111; margin-top: 10px; }

  /* Colores */
  .colors {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    margin-top: 10px;
  }

  .color {
    width: 30px;
    height: 30px;
    border-radius: 50%;
    border: 2px solid #222;
    cursor: pointer;
  }

  /* Sección de grosores, tamaño de la bolita de tinte */
  .sizes {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
  }

  .size-buttons {
    display: flex;
    gap: 12px;
  }

  .size {
    border-radius: 50%;
    border: 2px solid #333;
    background: #fff;
    cursor: pointer;
  }

  .size[data-width="2"] { width: 10px; height: 10px; }
  .size[data-width="5"] { width: 20px; height: 20px; }
  .size[data-width="10"] { width: 30px; height: 30px; }

  .label {
    font-size: 14px;
    font-weight: bold;
    color: #333;
  }

  #pointer {
    position: absolute;
    width: 10px;
    height: 10px;
    background: black;
    border-radius: 50%;
    pointer-events: none;
    transform: translate(-50%, -50%);
  }
</style>
</head>
<body>
<div class="paint-container">
  <!-- Canvas -->
  <canvas id="paint" width="800" height="500"></canvas>

  <!-- Herramientas -->
  <div class="tools">
    <div style="display:flex; flex-direction:column; align-items:center; gap:10px;">
      <button id="mode">Modo: libre</button>
      <button id="eraser">Borrador</button>
      <button id="clearAll">Borrar todo</button>
    </div>

    <div class="colors">
      <div class="color" style="background:red" data-color="red"></div>
      <div class="color" style="background:green" data-color="green"></div>
      <div class="color" style="background:blue" data-color="blue"></div>
      <div class="color" style="background:yellow" data-color="yellow"></div>
      <div class="color" style="background:purple" data-color="purple"></div>
      <div class="color" style="background:orange" data-color="orange"></div>
      <div class="color" style="background:black" data-color="black"></div>
    </div>

    <div class="sizes">
      <div class="label">Grosor</div>
      <div class="size-buttons">
        <button class="size" data-width="2"></button>
        <button class="size" data-width="5"></button>
        <button class="size" data-width="10"></button>
      </div>
    </div>
  </div>
</div>

<div id="pointer"></div>

<script>


const canvas = document.getElementById("paint");
const ctx = canvas.getContext("2d");
const pointer = document.getElementById("pointer");

let color = "black";
let lineWidth = 2;
let painting = false;
let erasing = false;
let mode = "free";
let points = [];

// -------------------------------------------------------------------------
// Puntero custom: un puntito que sigue el raton para saber donde estas.
// -------------------------------------------------------------------------
canvas.addEventListener("mousemove", e => {
  const rect = canvas.getBoundingClientRect();
  const x = e.clientX - rect.left;
  const y = e.clientY - rect.top;
  pointer.style.left = e.clientX + "px";
  pointer.style.top = e.clientY + "px";

  if (painting && mode === "free") {
    ctx.lineTo(x, y);
    ctx.stroke();
  }
});

// -------------------------------------------------------------------------
// Click y empieza la carnita del paint
// -------------------------------------------------------------------------
canvas.addEventListener("mousedown", e => {
  const rect = canvas.getBoundingClientRect();
  const x = e.clientX - rect.left;
  const y = e.clientY - rect.top;

  if (mode === "free") {
    painting = true;
    ctx.beginPath();
    ctx.moveTo(x, y);
    ctx.strokeStyle = erasing ? "white" : color;
    ctx.lineWidth = lineWidth;
    ctx.lineCap = "round";
  } else {
    // modo vectorial, el chido
    points.push({x, y});
    const first = points[0];

    if (points.length > 2) {
      const dx = x - first.x;
      const dy = y - first.y;
      const dist = Math.sqrt(dx * dx + dy * dy);
      if (dist < 10) {
        ctx.beginPath();
        ctx.moveTo(points[0].x, points[0].y);
        for (let i = 1; i < points.length; i++) ctx.lineTo(points[i].x, points[i].y);
        ctx.closePath();
        ctx.fillStyle = color;
        ctx.strokeStyle = color;
        ctx.lineWidth = lineWidth;
        ctx.fill();
        ctx.stroke();
        points = [];
        return;
      }
    }

    if (points.length > 1) {
      const prev = points[points.length - 2];
      ctx.beginPath();
      ctx.moveTo(prev.x, prev.y);
      ctx.lineTo(x, y);
      ctx.strokeStyle = color;
      ctx.lineWidth = lineWidth;
      ctx.stroke();
    }
  }
});

// -------------------------------------------------------------------------
// Sueltas click y paras de rayar todo
// -------------------------------------------------------------------------
canvas.addEventListener("mouseup", () => {
  painting = false;
  ctx.closePath();
});

// -------------------------------------------------------------------------
// Cambiar la skin(el color)
// -------------------------------------------------------------------------
document.querySelectorAll(".color").forEach(btn => {
  btn.addEventListener("click", () => {
    color = btn.dataset.color;
    erasing = false;
  });
});

// -------------------------------------------------------------------------
// Borrador (modo fantasma blanco)
// -------------------------------------------------------------------------
document.getElementById("eraser").addEventListener("click", () => {
  erasing = true;
});

// -------------------------------------------------------------------------
// Borrar todo el lienzo, ya por si te cansas a la chingada, no siento mis dedos, ya me cansé de programar y estar pegado a la compu 
// -------------------------------------------------------------------------
document.getElementById("clearAll").addEventListener("click", () => {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  points = [];
});

// -------------------------------------------------------------------------
// Cambiar grosor de trazo grrrrr
// -------------------------------------------------------------------------
document.querySelectorAll(".size").forEach(btn => {
  btn.addEventListener("click", () => {
    lineWidth = parseInt(btn.dataset.width);
  });
});

// -------------------------------------------------------------------------
// Cambiar modo libre/vectorial, porque somos coquetos y audaces
// -------------------------------------------------------------------------
document.getElementById("mode").addEventListener("click", e => {
  if (mode === "free") {
    mode = "vector";
    e.target.textContent = "Modo: vectorial";
  } else {
    mode = "free";
    e.target.textContent = "Modo: libre";
    points = [];
  }
});
</script>
</body>
</html>
